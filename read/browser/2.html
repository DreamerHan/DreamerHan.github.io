<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>fetch 请求下载文件 | 行也安然，坐也安然</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="韩志臻的blog">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.a86fb578.js" as="script"><link rel="preload" href="/assets/js/2.f4c76e8f.js" as="script"><link rel="preload" href="/assets/js/8.46452597.js" as="script"><link rel="prefetch" href="/assets/js/10.c61de724.js"><link rel="prefetch" href="/assets/js/100.4d2d0254.js"><link rel="prefetch" href="/assets/js/11.5946abfa.js"><link rel="prefetch" href="/assets/js/12.f35e3c14.js"><link rel="prefetch" href="/assets/js/13.b07a3d91.js"><link rel="prefetch" href="/assets/js/14.bce4ea6a.js"><link rel="prefetch" href="/assets/js/15.22ab3510.js"><link rel="prefetch" href="/assets/js/16.532528f4.js"><link rel="prefetch" href="/assets/js/17.6547aa4e.js"><link rel="prefetch" href="/assets/js/18.fccb4247.js"><link rel="prefetch" href="/assets/js/19.cf7baf86.js"><link rel="prefetch" href="/assets/js/20.80bddd98.js"><link rel="prefetch" href="/assets/js/21.9dd6f94b.js"><link rel="prefetch" href="/assets/js/22.df40fa6b.js"><link rel="prefetch" href="/assets/js/23.d381164b.js"><link rel="prefetch" href="/assets/js/24.23eccce1.js"><link rel="prefetch" href="/assets/js/25.675a5dd3.js"><link rel="prefetch" href="/assets/js/26.134e7b03.js"><link rel="prefetch" href="/assets/js/27.44100860.js"><link rel="prefetch" href="/assets/js/28.51c5575c.js"><link rel="prefetch" href="/assets/js/29.2bb6682f.js"><link rel="prefetch" href="/assets/js/3.dc71286f.js"><link rel="prefetch" href="/assets/js/30.675b9b1e.js"><link rel="prefetch" href="/assets/js/31.12bfff40.js"><link rel="prefetch" href="/assets/js/32.c6ed9587.js"><link rel="prefetch" href="/assets/js/33.5dd439a5.js"><link rel="prefetch" href="/assets/js/34.0d93fa0b.js"><link rel="prefetch" href="/assets/js/35.f16b6751.js"><link rel="prefetch" href="/assets/js/36.84da4777.js"><link rel="prefetch" href="/assets/js/37.f584e26a.js"><link rel="prefetch" href="/assets/js/38.22809fd4.js"><link rel="prefetch" href="/assets/js/39.87565ecd.js"><link rel="prefetch" href="/assets/js/4.03ca31d0.js"><link rel="prefetch" href="/assets/js/40.99aa2710.js"><link rel="prefetch" href="/assets/js/41.ffdc7e56.js"><link rel="prefetch" href="/assets/js/42.c8035223.js"><link rel="prefetch" href="/assets/js/43.e2214561.js"><link rel="prefetch" href="/assets/js/44.0451c7eb.js"><link rel="prefetch" href="/assets/js/45.c7c5d317.js"><link rel="prefetch" href="/assets/js/46.c515681e.js"><link rel="prefetch" href="/assets/js/47.a8782c24.js"><link rel="prefetch" href="/assets/js/48.8f8216de.js"><link rel="prefetch" href="/assets/js/49.c62cf464.js"><link rel="prefetch" href="/assets/js/5.7803e6c7.js"><link rel="prefetch" href="/assets/js/50.d368641c.js"><link rel="prefetch" href="/assets/js/51.2d563851.js"><link rel="prefetch" href="/assets/js/52.cd107f70.js"><link rel="prefetch" href="/assets/js/53.947bfe0c.js"><link rel="prefetch" href="/assets/js/54.3fd47ce6.js"><link rel="prefetch" href="/assets/js/55.54035b51.js"><link rel="prefetch" href="/assets/js/56.4b338e06.js"><link rel="prefetch" href="/assets/js/57.3dc90d2d.js"><link rel="prefetch" href="/assets/js/58.d8c80a8c.js"><link rel="prefetch" href="/assets/js/59.3ba9b603.js"><link rel="prefetch" href="/assets/js/6.67d8c318.js"><link rel="prefetch" href="/assets/js/60.7de94339.js"><link rel="prefetch" href="/assets/js/61.17ac02b3.js"><link rel="prefetch" href="/assets/js/62.34d201e5.js"><link rel="prefetch" href="/assets/js/63.44d78f9a.js"><link rel="prefetch" href="/assets/js/64.b6341398.js"><link rel="prefetch" href="/assets/js/65.74297b02.js"><link rel="prefetch" href="/assets/js/66.e27db92d.js"><link rel="prefetch" href="/assets/js/67.08815a96.js"><link rel="prefetch" href="/assets/js/68.ab305a80.js"><link rel="prefetch" href="/assets/js/69.244199d4.js"><link rel="prefetch" href="/assets/js/7.6ef23db2.js"><link rel="prefetch" href="/assets/js/70.16c8374a.js"><link rel="prefetch" href="/assets/js/71.32994fc5.js"><link rel="prefetch" href="/assets/js/72.cd5e5614.js"><link rel="prefetch" href="/assets/js/73.95a35acc.js"><link rel="prefetch" href="/assets/js/74.45311324.js"><link rel="prefetch" href="/assets/js/75.5bcdecc4.js"><link rel="prefetch" href="/assets/js/76.524ebead.js"><link rel="prefetch" href="/assets/js/77.b68128ca.js"><link rel="prefetch" href="/assets/js/78.24beb1ca.js"><link rel="prefetch" href="/assets/js/79.086f08d5.js"><link rel="prefetch" href="/assets/js/80.05f17557.js"><link rel="prefetch" href="/assets/js/81.892e81b9.js"><link rel="prefetch" href="/assets/js/82.6eed85e0.js"><link rel="prefetch" href="/assets/js/83.55540564.js"><link rel="prefetch" href="/assets/js/84.df22c114.js"><link rel="prefetch" href="/assets/js/85.082bbedf.js"><link rel="prefetch" href="/assets/js/86.7d3cb835.js"><link rel="prefetch" href="/assets/js/87.53fbac2b.js"><link rel="prefetch" href="/assets/js/88.01455844.js"><link rel="prefetch" href="/assets/js/89.f86e57f5.js"><link rel="prefetch" href="/assets/js/9.ef8fa7e5.js"><link rel="prefetch" href="/assets/js/90.923a5b8a.js"><link rel="prefetch" href="/assets/js/91.7a019c2a.js"><link rel="prefetch" href="/assets/js/92.397eea0f.js"><link rel="prefetch" href="/assets/js/93.059d7112.js"><link rel="prefetch" href="/assets/js/94.84e5aa9d.js"><link rel="prefetch" href="/assets/js/95.0f3904d2.js"><link rel="prefetch" href="/assets/js/96.05b74007.js"><link rel="prefetch" href="/assets/js/97.fab30f76.js"><link rel="prefetch" href="/assets/js/98.fe86df06.js"><link rel="prefetch" href="/assets/js/99.68d7a172.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">行也安然，坐也安然</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/0.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/0.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/0.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/common/0.html" class="nav-link">
  vue 常见功能
</a></li><li class="dropdown-item"><!----> <a href="/vue/v3/0.html" class="nav-link">
  一个项目的搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/record/0.html" class="nav-link">
  记录
</a></li><li class="dropdown-item"><!----> <a href="/webpack/practice/0.html" class="nav-link">
  实践
</a></li></ul></div></div><div class="nav-item"><a href="/read/jwt/0.html" class="nav-link">
  Reading
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NPM包使用记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projects/npm/log4js.html" class="nav-link">
  Log4js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/markmap.html" class="nav-link">
  Markmap.js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/react-pdf.html" class="nav-link">
  React-pdf
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/0.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/0.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/0.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/common/0.html" class="nav-link">
  vue 常见功能
</a></li><li class="dropdown-item"><!----> <a href="/vue/v3/0.html" class="nav-link">
  一个项目的搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/record/0.html" class="nav-link">
  记录
</a></li><li class="dropdown-item"><!----> <a href="/webpack/practice/0.html" class="nav-link">
  实践
</a></li></ul></div></div><div class="nav-item"><a href="/read/jwt/0.html" class="nav-link">
  Reading
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NPM包使用记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projects/npm/log4js.html" class="nav-link">
  Log4js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/markmap.html" class="nav-link">
  Markmap.js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/react-pdf.html" class="nav-link">
  React-pdf
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/read/jwt/0" class="sidebar-heading clickable"><span>JWT</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/read/pm2/1" class="sidebar-heading clickable"><span>pm2</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/read/browser/0" class="sidebar-heading clickable open"><span>浏览器API</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/read/browser/0.html" class="sidebar-link">Selection</a></li><li><a href="/read/browser/1.html" class="sidebar-link">Range</a></li><li><a href="/read/browser/2.html" aria-current="page" class="active sidebar-link">fetch 请求下载文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/read/browser/2.html#blob-对象" class="sidebar-link">Blob 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/read/browser/2.html#创建-blob-对象" class="sidebar-link">创建 Blob 对象</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#blob-对象的分片" class="sidebar-link">Blob 对象的分片</a></li></ul></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#file-对象" class="sidebar-link">File 对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/read/browser/2.html#input-标签文件上传获取" class="sidebar-link">input 标签文件上传获取</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#通过拖拽文件来获取" class="sidebar-link">通过拖拽文件来获取</a></li></ul></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#filereader" class="sidebar-link">FileReader</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/read/browser/2.html#读取方式" class="sidebar-link">读取方式</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#readasdataurl" class="sidebar-link">readAsDataURL</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#readastext" class="sidebar-link">readAsText</a></li></ul></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#url-createobjecturl-object" class="sidebar-link">URL.createObjectURL(object)</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#content-disposition" class="sidebar-link">Content-disposition</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/read/browser/2.html#在页面内打开文件" class="sidebar-link">在页面内打开文件</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#弹出保存文件弹窗" class="sidebar-link">弹出保存文件弹窗</a></li></ul></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#总结" class="sidebar-link">总结</a></li><li class="sidebar-sub-header"><a href="/read/browser/2.html#内容总结来源" class="sidebar-link">内容总结来源</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/read/chao/0" class="sidebar-heading clickable"><span>琐碎留痕</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/read/book/0" class="sidebar-heading clickable"><span>读书笔记</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/read/js/0" class="sidebar-heading clickable"><span>JS知识点</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="fetch-请求下载文件"><a href="#fetch-请求下载文件" class="header-anchor">#</a> fetch 请求下载文件</h1> <p>先来看一下最终封装的 fetch 下载资源的代码：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">downloadFileByFetch</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">url<span class="token operator">:</span> string<span class="token punctuation">,</span> options<span class="token operator">:</span> IReqOptions</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> headers<span class="token punctuation">,</span> data<span class="token punctuation">,</span> timeout <span class="token operator">=</span> <span class="token number">200000</span> <span class="token punctuation">}</span> <span class="token operator">=</span> options<span class="token punctuation">;</span>

  <span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> signal <span class="token operator">=</span> controller<span class="token punctuation">.</span>signal<span class="token punctuation">;</span>
  <span class="token keyword">const</span> timeoutId <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    controller<span class="token punctuation">.</span><span class="token function">abort</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> timeout<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> timestamp <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> params <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token operator">...</span>data<span class="token punctuation">,</span> t<span class="token operator">:</span> timestamp <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> reqUrl <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">?</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>params<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>reqUrl<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
      headers<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token operator">...</span>headers <span class="token punctuation">}</span><span class="token punctuation">,</span>
      signal<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>response<span class="token punctuation">.</span>ok<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>statusText<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 业务类代码：如果资源无法下载，就返回一个 json 形式的数据 type。这样能第一时间获取到不能下载服务端原因。</span>
    <span class="token keyword">const</span> contentType <span class="token operator">=</span> response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'content-type'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>contentType<span class="token operator">?.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token string">'application/json'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> number<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token comment">// 通过 content-disposition 属性来获取文件的处理方式</span>
      <span class="token keyword">const</span> regRes <span class="token operator">=</span> <span class="token regex"><span class="token regex-delimiter">/</span><span class="token regex-source language-regex">filename=\&quot;(.*)\&quot;</span><span class="token regex-delimiter">/</span></span><span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>
        response<span class="token punctuation">.</span>headers<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'content-disposition'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">''</span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">const</span> filename <span class="token operator">=</span> regRes <span class="token operator">?</span> regRes<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">;</span>

      <span class="token comment">// 将响应转成 blob 格式的 promise 对象</span>
      <span class="token keyword">const</span> blobFile <span class="token operator">=</span> <span class="token keyword">await</span> response<span class="token punctuation">.</span><span class="token function">blob</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token function">createDownload</span><span class="token punctuation">(</span>blobFile<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'文件格式转换失败'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> any<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> message <span class="token operator">=</span>
      error<span class="token punctuation">.</span>message <span class="token operator">===</span> <span class="token string">'The user aborted a request.'</span>
        <span class="token operator">?</span> <span class="token string">'服务请求超时，请稍后重试'</span>
        <span class="token operator">:</span> <span class="token string">'下载失败，请稍后再重试。'</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timeoutId<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">createDownload</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">blobFile<span class="token operator">:</span> Blob<span class="token punctuation">,</span> filename<span class="token operator">:</span> string</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 兼容低版本浏览器</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>navigator <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span>msSaveBlob<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span>window<span class="token punctuation">.</span>navigator <span class="token keyword">as</span> any<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">msSaveBlob</span><span class="token punctuation">(</span>blobFile<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> blobUrl <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blobFile<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> aDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  aDom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'download'</span><span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">;</span>
  aDom<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">,</span> blobUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>aDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
  aDom<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">const</span> timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>aDom<span class="token punctuation">)</span><span class="token punctuation">;</span>
    window<span class="token punctuation">.</span><span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>blobUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 延迟2秒后移除a标签</span>

  <span class="token comment">// callback &amp;&amp; callback();</span>
  <span class="token comment">// successCb &amp;&amp; successCb();</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre></div><p>上述代码的下载文件的流程大概有几个过程：</p> <ol><li><strong>fetch</strong> 方法请求资源接口，得到一个响应结果 response。</li> <li><strong>response</strong> 通过调用 <code>response.blob()</code> 方法获取一个 response 流并将把它读取出来。返回一个 promise 形式的 blob 对象。</li> <li>通过 <code>URL.createObjectURL</code> 将 blob 对象转成一个 url</li> <li>使用 a 标签配置转成 url 进行下载功能的处理。</li></ol> <p>所以，整个过程关联了以下一些问题：</p> <ol><li>Blob 对象是什么？</li> <li>为什么把 response 转成 blob 对象后就可以下载了？</li> <li><code>URL.createObjectURL</code> 方法是什么，它把 blob 对象转成什么样的 url 了？</li></ol> <h2 id="blob-对象"><a href="#blob-对象" class="header-anchor">#</a> Blob 对象</h2> <div class="custom-block tip"><p class="custom-block-title">MDN 解释</p> <p>Blob 对象表示一个不可变、原始数据的类文件对象。它的数据可以按文本或者二进制的格式进行读取。也可以转换成 ReadableStream 来用于数据操作。</p></div> <p>Blob 对象全称是 binary large object，即<strong>二进制大型对象</strong>。</p> <p>它本质上是 js 中的一种对象，里面可以存储大量的二进制编码格式的数据。所以，根据名称来理解，它就是用来表示二进制数据内容的。</p> <p>它的数据可以来源于文件，因此 Blob 可以用来读写文件，比如读写一个图片文件的内容。</p> <p><strong>Blob 对象的数据是不可修改的。</strong> 可以通过 FileReader 来进行读取，或者通过 Response 对象的方式来进行读取。</p> <h3 id="创建-blob-对象"><a href="#创建-blob-对象" class="header-anchor">#</a> 创建 Blob 对象</h3> <p>使用 Blob 构造函数来创建 <code>new Blob(array, options)</code>。</p> <ol><li><p>参数 1: <code>array</code> 由 ArrayBuffer、ArrayBufferView、Blob、DOMString 等对象构成，这些都可以被放进 Blob 中。</p></li> <li><p>参数 2:</p> <ul><li><p>通过 <code>endings</code> 来指定包含行结束符 <code>\n</code> 的字符串如何被写入，默认是 <code>transparent</code>，该配置不常用。</p></li> <li><p>通过 <code>type</code> 指定放进 blob 中的参数 MIME 类型。</p> <p>所谓 MIME 类型，全称是 Multipurpose Internet Mail Extension 多用途互联网邮件扩展。</p> <p>互联网上使用的每个资源都有一个媒体类型，也被称为 MIME 类型。这些信息对于服务器和客户端之间的通讯是必要的。 浏览器需要知道发送给它的资源的媒体类型，以便它能够正确地处理它们。 服务器也是如此。</p> <p>type 类型有以下内容：</p> <table><thead><tr><th>MIME 类型</th> <th>描述</th></tr></thead> <tbody><tr><td>text/plain</td> <td>纯文本文档</td></tr> <tr><td>text/html</td> <td>HTML 文档</td></tr> <tr><td>text/javascript</td> <td>js 文件</td></tr> <tr><td>text/css</td> <td>css 文件</td></tr> <tr><td>application/json</td> <td>JSON 文件</td></tr> <tr><td>application/pdf</td> <td>PDF 文件</td></tr> <tr><td>application/xml</td> <td>XML 文件</td></tr> <tr><td>image/jpeg</td> <td>JPEG 图片</td></tr> <tr><td>image/png</td> <td>PNG 图片</td></tr> <tr><td>image/gif</td> <td>GIF 图像</td></tr> <tr><td>image/svg+xml</td> <td>SVG 图像</td></tr> <tr><td>audio/mpeg</td> <td>MP3 文件</td></tr> <tr><td>video/mpeg</td> <td>MP4 文件</td></tr></tbody></table></li></ul></li></ol> <h4 id="创建一个字符串文本类型的-blob"><a href="#创建一个字符串文本类型的-blob" class="header-anchor">#</a> 创建一个字符串文本类型的 blob</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>得到的结构如下，blob 对象有 10 个字节，MIME 类型是传入的 <code>text/plain</code> 形式的。</p> <p><img src="/assets/img/blob-1.3dcf8177.png" alt="An Image"></p> <h4 id="blob-对象的属性"><a href="#blob-对象的属性" class="header-anchor">#</a> Blob 对象的属性</h4> <ul><li>Blob.size 获取包含数据的大小，只读。</li> <li>Blob.type 获取数据 MIME 类型的字符串，位置类型是空字符串，只读。</li></ul> <h4 id="blob-对象的方法"><a href="#blob-对象的方法" class="header-anchor">#</a> Blob 对象的方法</h4> <ul><li><p>Blob.slice([start[, end[, contentType]]]) ，返回包含指定范围数据的新 Blob 对象；</p></li> <li><p>Blob.stream() ，返回一个能够读取 Blob 数据内容的 ReadableStream ；</p></li> <li><p>Blob.text() ，返回 Promise ，获得包含 Blob 所有数据的 UTF-8 格式 USVString ；</p></li> <li><p>Blob.arrayBuffer() ，返回 Promise ，获得包含 Blob 所有数据的二进制格式 ArrayBuffer ；</p></li></ul> <h3 id="blob-对象的分片"><a href="#blob-对象的分片" class="header-anchor">#</a> Blob 对象的分片</h3> <p>Blob 分片被用到最多的地方是就是文件的分片上传。</p> <p>Blob 对象内置了一个 <code>slice</code> 方法来对 blob 对象进行分片处理。</p> <p>slice 方法有三个参数：</p> <ul><li><p>start: 设置切片的起点，即切片的开始位置，默认值 0，这意味着切片应该从第一个字节开始。</p></li> <li><p>end: 设置切片的结束点，会对该位置之前的数据进行切片。即 end 值不被包含在当次切片内容中，默认是 blob.size。</p></li> <li><p>contentType: 设置新的 blob 的 MIME 类型。如果省略 type， 则 type 就是一个空字符串。</p></li></ul> <p><strong>slice 方法返回的是一个新的 Blob 对象。它包含了调用 slice 方法的原始 Blob 对象数据指定的范围子集。最重要的是，原始 blob 对象并没有被改变。</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> blob1 <span class="token operator">=</span> blob<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob1&gt;&quot;</span><span class="token punctuation">,</span> blob1<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> blob2 <span class="token operator">=</span> blob<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">&quot;text/plian&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;blob2&gt;&quot;</span><span class="token punctuation">,</span> blob2<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="An Image"></p> <h2 id="file-对象"><a href="#file-对象" class="header-anchor">#</a> File 对象</h2> <p>说起 Blob 对象，大多能看到两句话：</p> <ul><li><p>它的数据可以来源于文件，因此 Blob 可以用来读写文件。</p></li> <li><p>File 对象的接口基于 Blob，它继承了 blob 的功能并进行了扩展，以支持用户系统上的文件操作。</p></li></ul> <p>所以，文件操作是 Blob 对象的典型使用场景。</p> <p>为此，JS 提供了我们常见的 File 对象，File 对象包含了 Blob 对象的全部功能，同时增加了一些新的属性，如 name 和 lastModifiedDate。</p> <h3 id="input-标签文件上传获取"><a href="#input-标签文件上传获取" class="header-anchor">#</a> input 标签文件上传获取</h3> <p>我们通常使用 input 文件选择器给用户提供选择文件的功能，通过浏览器执行 onchange 方法获取 File 对象数组。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-file<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> fileDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#input-file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fileDom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
  <span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token boolean">false</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><img src="/assets/img/file-1.78e9f3c9.png" alt="An Image"></p> <h3 id="通过拖拽文件来获取"><a href="#通过拖拽文件来获取" class="header-anchor">#</a> 通过拖拽文件来获取</h3> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>drag<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/css<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#drag</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #ccc<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> dragDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#drag&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  dragDom<span class="token punctuation">.</span><span class="token function-variable function">ondragover</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  dragDom<span class="token punctuation">.</span><span class="token function-variable function">ondrop</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    e<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> files <span class="token operator">=</span> e<span class="token punctuation">.</span>dataTransfer<span class="token punctuation">.</span>files<span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="filereader"><a href="#filereader" class="header-anchor">#</a> FileReader</h2> <p>通过 console.log 打印 blob 对象时，可以看到。blob 对象只能看到 size 和 type 类型。无法直接读取它的内容。</p> <p><strong>FileReader 是用来读取 Blob 对象的内容的。</strong></p> <h3 id="读取方式"><a href="#读取方式" class="header-anchor">#</a> 读取方式</h3> <p><img src="/assets/img/filereader-1.3ad76726.png" alt="An Image"></p> <p>它有以下几个读取的方式：</p> <ol><li><p><strong>readAsArrayBuffer</strong> 读取指定 Blob 中的内容，完成之后，result 属性中保存的是被读取文件的 <code>ArrayBuffer</code> 数据对象。</p></li> <li><p><strong>readAsBinaryString</strong> 读取指定 Blob 中的内容，完成之后，result 属性中保存的是被读取文件的原始二进制数据。</p></li> <li><p><strong>readAsDataURL</strong> 读取指定 Blob 中的内容，完成之后，result 属性中将包含一个 <code>data:URL</code> 格式的 base64 字符串以表示所读取的文件的内容。</p></li> <li><p><strong>readAsText</strong> 读取指定 Blob 中的内容，完成之后，result 属性中将包含一个字符串以表示所读取的文件内容。</p></li></ol> <h3 id="readasdataurl"><a href="#readasdataurl" class="header-anchor">#</a> readAsDataURL</h3> <p>将内容读取为 base64 字符串的形式，主要针对图片等内容上传时的操作处理。</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>file<span class="token punctuation">&quot;</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>files<span class="token punctuation">&quot;</span></span> <span class="token attr-name">accept</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>image/*<span class="token punctuation">&quot;</span></span> <span class="token attr-name">multiple</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>input-file<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>showImg<span class="token punctuation">&quot;</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">display</span><span class="token punctuation">:</span> block<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">const</span> fileDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#input-file&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  fileDom<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>
    <span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span>
    <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 将 File 的内容以base64的方式读取出来</span>
      reader<span class="token punctuation">.</span><span class="token function">readAsDataURL</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>target<span class="token punctuation">.</span>files<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      reader<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">const</span> imgDom <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;#showImg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        imgDom<span class="token punctuation">.</span>src <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">.</span>result<span class="token punctuation">;</span>
        imgDom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
        imgDom<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">&quot;100px&quot;</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token boolean">false</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="readastext"><a href="#readastext" class="header-anchor">#</a> readAsText</h3> <p>将内容读取成字符串的形式。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> blob <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Blob</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;helloworld&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;text/plain&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> reader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileReader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
reader<span class="token punctuation">.</span><span class="token function">readAsText</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>

reader<span class="token punctuation">.</span>result<span class="token punctuation">;</span> <span class="token comment">// 就是 helloworld</span>
</code></pre></div><h2 id="url-createobjecturl-object"><a href="#url-createobjecturl-object" class="header-anchor">#</a> URL.createObjectURL(object)</h2> <p><strong>参数 object</strong> 的类型就是 File 对象、Blob 对象或者是 MediaSource 对象。</p> <p><strong>返回值</strong> 是一个包含了参数对象的 URL string，这个 URL 可以用于指定源 object 的内容。</p> <p>注意几个问题：</p> <ol><li><p>返回的 URL 的生命周期和创建它的窗口中的 document 是互相绑定的，也就是说当浏览器卸载 document 的时候，会自动释它们。但还是建议在合适的时机主动释放掉它们。</p></li> <li><p>每次调用 createObjectURL() 方法时，都会创建一个新的 URL 对象，即使你已经用相同的对象作为参数创建过。所以，当不再需要这些 URL 对象时，每个对象必须通过调用 URL.revokeObjectURL() 方法来释放。</p></li></ol> <h2 id="content-disposition"><a href="#content-disposition" class="header-anchor">#</a> Content-disposition</h2> <p>Content-disposition 是 MIME(电子邮件) 协议的扩展，MIME 协议指示 MIME 用户代理如何显示附加的文件。</p> <p><strong>它作为对下载文件的一个标识字段</strong>，有两种类型：<code>inline</code> 和 <code>attachment</code> 。</p> <ul><li><strong>inline (默认值)</strong>：将文件内容直接显示在页面；</li> <li><strong>attachment</strong>：弹出对话框让用户下载。</li></ul> <p>当 Internet Explorer 接收到头时，它会激活文件下载对话框，它的文件名框自动填充了头中指定的文件名。（请注意，这是设计导致的；无法使用此功能将文档保存到用户的计算机上，而不向用户询问保存位置。）</p> <p>服务端向客户端游览器发送文件时，如果是浏览器支持的文件类型，一般会默认使用浏览器打开，比如 txt、jpg 等，会直接在浏览器中显示，如果需要提示用户保存，就要利用 Content-Disposition 进行一下处理，关键在于一定要加上 attachment：</p> <div class="language-js extra-class"><pre class="language-js"><code>Response<span class="token punctuation">.</span><span class="token function">AppendHeader</span><span class="token punctuation">(</span>“Content<span class="token operator">-</span>Disposition”<span class="token punctuation">,</span>“attachment<span class="token punctuation">;</span>filename<span class="token operator">=</span>FileName<span class="token punctuation">.</span>txt”<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>备注：这样浏览器会提示保存还是打开，即使选择打开，也会使用相关联的程序比如记事本打开，而不是 IE 直接打开了。</p> <h3 id="在页面内打开文件"><a href="#在页面内打开文件" class="header-anchor">#</a> 在页面内打开文件</h3> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">inline;
	filename=&quot;+new String(filename.getBytes(),&quot;utf-8</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Length&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token operator">+</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="弹出保存文件弹窗"><a href="#弹出保存文件弹窗" class="header-anchor">#</a> 弹出保存文件弹窗</h3> <div class="language-js extra-class"><pre class="language-js"><code>response<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Type&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;text/plain&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Disposition&quot;</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">attachment;
	filename=&quot;+new String(filename.getBytes(),&quot;utf-8</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

response<span class="token punctuation">.</span><span class="token function">addHeader</span><span class="token punctuation">(</span><span class="token string">&quot;Content-Length&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;&quot;</span><span class="token operator">+</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p><img src="/assets/img/zongjie.2d4fe081.png" alt="An Image"></p> <h2 id="内容总结来源"><a href="#内容总结来源" class="header-anchor">#</a> 内容总结来源</h2> <ol><li><p><a href="https://fasionchan.com/posts/blob/#:~:text=Blob%20%E5%AF%B9%E8%B1%A1%E6%98%AF%E4%BA%8C%E8%BF%9B%E5%88%B6%E5%A4%A7%E5%9E%8B,%E4%B8%80%E4%B8%AA%E5%9B%BE%E7%89%87%E6%96%87%E4%BB%B6%E7%9A%84%E5%86%85%E5%AE%B9%E3%80%82" target="_blank" rel="noopener noreferrer">Blob 对象应用实战<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.csdn.net/qq_35577655/article/details/127169333?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522171393672016800182150158%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id=171393672016800182150158&amp;biz_id=0&amp;utm_medium=distribute.pc_search_result.none-task-blog-2~blog~baidu_landing_v2~default-1-127169333-null-null.nonecase&amp;utm_term=%E6%88%91%E4%BB%AC%E4%B8%80%E8%B5%B7%E5%AD%A6%E5%89%8D%E7%AB%AF%20blob&amp;spm=1018.2226.3001.4450" target="_blank" rel="noopener noreferrer">今天一次性给你讲清楚：File、Blob、FileReader、ArrayBuffer、Base64<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://www.bilibili.com/video/BV1XD4y1C7S3/?spm_id_from=333.788&amp;vd_source=abffdeb2216f69f9b4195028e8ee39da" target="_blank" rel="noopener noreferrer">今天一次性给你讲清楚：File、Blob、FileReader、ArrayBuffer、Base64<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li> <li><p><a href="https://blog.csdn.net/qianxing111/article/details/105052852#:~:text=Content%2DDisposition%20%E5%B1%9E%E6%80%A7%E6%98%AF%E4%BD%9C%E4%B8%BA,%E5%AF%B9%E8%AF%9D%E6%A1%86%E8%AE%A9%E7%94%A8%E6%88%B7%E4%B8%8B%E8%BD%BD%E3%80%82" target="_blank" rel="noopener noreferrer">http header 中的 Content-disposition<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></li></ol></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/read/browser/1.html" class="prev">
        Range
      </a></span> <span class="next"><a href="/read/chao/0.html">
        NodeJS
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a86fb578.js" defer></script><script src="/assets/js/2.f4c76e8f.js" defer></script><script src="/assets/js/8.46452597.js" defer></script>
  </body>
</html>
