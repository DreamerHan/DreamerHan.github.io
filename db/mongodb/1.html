<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mac 的安装 | 行也安然，坐也安然</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="韩志臻的blog">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.a86fb578.js" as="script"><link rel="preload" href="/assets/js/2.f4c76e8f.js" as="script"><link rel="preload" href="/assets/js/20.80bddd98.js" as="script"><link rel="prefetch" href="/assets/js/10.c61de724.js"><link rel="prefetch" href="/assets/js/100.4d2d0254.js"><link rel="prefetch" href="/assets/js/11.5946abfa.js"><link rel="prefetch" href="/assets/js/12.f35e3c14.js"><link rel="prefetch" href="/assets/js/13.b07a3d91.js"><link rel="prefetch" href="/assets/js/14.bce4ea6a.js"><link rel="prefetch" href="/assets/js/15.22ab3510.js"><link rel="prefetch" href="/assets/js/16.532528f4.js"><link rel="prefetch" href="/assets/js/17.6547aa4e.js"><link rel="prefetch" href="/assets/js/18.fccb4247.js"><link rel="prefetch" href="/assets/js/19.cf7baf86.js"><link rel="prefetch" href="/assets/js/21.9dd6f94b.js"><link rel="prefetch" href="/assets/js/22.df40fa6b.js"><link rel="prefetch" href="/assets/js/23.d381164b.js"><link rel="prefetch" href="/assets/js/24.23eccce1.js"><link rel="prefetch" href="/assets/js/25.675a5dd3.js"><link rel="prefetch" href="/assets/js/26.134e7b03.js"><link rel="prefetch" href="/assets/js/27.44100860.js"><link rel="prefetch" href="/assets/js/28.51c5575c.js"><link rel="prefetch" href="/assets/js/29.2bb6682f.js"><link rel="prefetch" href="/assets/js/3.dc71286f.js"><link rel="prefetch" href="/assets/js/30.675b9b1e.js"><link rel="prefetch" href="/assets/js/31.12bfff40.js"><link rel="prefetch" href="/assets/js/32.c6ed9587.js"><link rel="prefetch" href="/assets/js/33.5dd439a5.js"><link rel="prefetch" href="/assets/js/34.0d93fa0b.js"><link rel="prefetch" href="/assets/js/35.f16b6751.js"><link rel="prefetch" href="/assets/js/36.84da4777.js"><link rel="prefetch" href="/assets/js/37.f584e26a.js"><link rel="prefetch" href="/assets/js/38.22809fd4.js"><link rel="prefetch" href="/assets/js/39.87565ecd.js"><link rel="prefetch" href="/assets/js/4.03ca31d0.js"><link rel="prefetch" href="/assets/js/40.99aa2710.js"><link rel="prefetch" href="/assets/js/41.ffdc7e56.js"><link rel="prefetch" href="/assets/js/42.c8035223.js"><link rel="prefetch" href="/assets/js/43.e2214561.js"><link rel="prefetch" href="/assets/js/44.0451c7eb.js"><link rel="prefetch" href="/assets/js/45.c7c5d317.js"><link rel="prefetch" href="/assets/js/46.c515681e.js"><link rel="prefetch" href="/assets/js/47.a8782c24.js"><link rel="prefetch" href="/assets/js/48.8f8216de.js"><link rel="prefetch" href="/assets/js/49.c62cf464.js"><link rel="prefetch" href="/assets/js/5.7803e6c7.js"><link rel="prefetch" href="/assets/js/50.d368641c.js"><link rel="prefetch" href="/assets/js/51.2d563851.js"><link rel="prefetch" href="/assets/js/52.cd107f70.js"><link rel="prefetch" href="/assets/js/53.947bfe0c.js"><link rel="prefetch" href="/assets/js/54.3fd47ce6.js"><link rel="prefetch" href="/assets/js/55.54035b51.js"><link rel="prefetch" href="/assets/js/56.4b338e06.js"><link rel="prefetch" href="/assets/js/57.3dc90d2d.js"><link rel="prefetch" href="/assets/js/58.d8c80a8c.js"><link rel="prefetch" href="/assets/js/59.3ba9b603.js"><link rel="prefetch" href="/assets/js/6.67d8c318.js"><link rel="prefetch" href="/assets/js/60.7de94339.js"><link rel="prefetch" href="/assets/js/61.17ac02b3.js"><link rel="prefetch" href="/assets/js/62.34d201e5.js"><link rel="prefetch" href="/assets/js/63.44d78f9a.js"><link rel="prefetch" href="/assets/js/64.b6341398.js"><link rel="prefetch" href="/assets/js/65.74297b02.js"><link rel="prefetch" href="/assets/js/66.e27db92d.js"><link rel="prefetch" href="/assets/js/67.08815a96.js"><link rel="prefetch" href="/assets/js/68.ab305a80.js"><link rel="prefetch" href="/assets/js/69.244199d4.js"><link rel="prefetch" href="/assets/js/7.6ef23db2.js"><link rel="prefetch" href="/assets/js/70.16c8374a.js"><link rel="prefetch" href="/assets/js/71.32994fc5.js"><link rel="prefetch" href="/assets/js/72.cd5e5614.js"><link rel="prefetch" href="/assets/js/73.95a35acc.js"><link rel="prefetch" href="/assets/js/74.45311324.js"><link rel="prefetch" href="/assets/js/75.5bcdecc4.js"><link rel="prefetch" href="/assets/js/76.524ebead.js"><link rel="prefetch" href="/assets/js/77.b68128ca.js"><link rel="prefetch" href="/assets/js/78.24beb1ca.js"><link rel="prefetch" href="/assets/js/79.086f08d5.js"><link rel="prefetch" href="/assets/js/8.46452597.js"><link rel="prefetch" href="/assets/js/80.05f17557.js"><link rel="prefetch" href="/assets/js/81.892e81b9.js"><link rel="prefetch" href="/assets/js/82.6eed85e0.js"><link rel="prefetch" href="/assets/js/83.55540564.js"><link rel="prefetch" href="/assets/js/84.df22c114.js"><link rel="prefetch" href="/assets/js/85.082bbedf.js"><link rel="prefetch" href="/assets/js/86.7d3cb835.js"><link rel="prefetch" href="/assets/js/87.53fbac2b.js"><link rel="prefetch" href="/assets/js/88.01455844.js"><link rel="prefetch" href="/assets/js/89.f86e57f5.js"><link rel="prefetch" href="/assets/js/9.ef8fa7e5.js"><link rel="prefetch" href="/assets/js/90.923a5b8a.js"><link rel="prefetch" href="/assets/js/91.7a019c2a.js"><link rel="prefetch" href="/assets/js/92.397eea0f.js"><link rel="prefetch" href="/assets/js/93.059d7112.js"><link rel="prefetch" href="/assets/js/94.84e5aa9d.js"><link rel="prefetch" href="/assets/js/95.0f3904d2.js"><link rel="prefetch" href="/assets/js/96.05b74007.js"><link rel="prefetch" href="/assets/js/97.fab30f76.js"><link rel="prefetch" href="/assets/js/98.fe86df06.js"><link rel="prefetch" href="/assets/js/99.68d7a172.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">行也安然，坐也安然</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/0.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/0.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/0.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/common/0.html" class="nav-link">
  vue 常见功能
</a></li><li class="dropdown-item"><!----> <a href="/vue/v3/0.html" class="nav-link">
  一个项目的搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/record/0.html" class="nav-link">
  记录
</a></li><li class="dropdown-item"><!----> <a href="/webpack/practice/0.html" class="nav-link">
  实践
</a></li></ul></div></div><div class="nav-item"><a href="/read/jwt/0.html" class="nav-link">
  Reading
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NPM包使用记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projects/npm/log4js.html" class="nav-link">
  Log4js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/markmap.html" class="nav-link">
  Markmap.js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/react-pdf.html" class="nav-link">
  React-pdf
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据存储" class="dropdown-title"><span class="title">数据存储</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据存储" class="mobile-dropdown-title"><span class="title">数据存储</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/db/mysql/0.html" class="nav-link">
  Mysql
</a></li><li class="dropdown-item"><!----> <a href="/db/redis/0.html" class="nav-link">
  Redis
</a></li><li class="dropdown-item"><!----> <a href="/db/mongodb/0.html" class="nav-link">
  MongoDB
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vue" class="dropdown-title"><span class="title">vue</span> <span class="arrow down"></span></button> <button type="button" aria-label="vue" class="mobile-dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/common/0.html" class="nav-link">
  vue 常见功能
</a></li><li class="dropdown-item"><!----> <a href="/vue/v3/0.html" class="nav-link">
  一个项目的搭建
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow down"></span></button> <button type="button" aria-label="webpack" class="mobile-dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/webpack/record/0.html" class="nav-link">
  记录
</a></li><li class="dropdown-item"><!----> <a href="/webpack/practice/0.html" class="nav-link">
  实践
</a></li></ul></div></div><div class="nav-item"><a href="/read/jwt/0.html" class="nav-link">
  Reading
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其他" class="dropdown-title"><span class="title">其他</span> <span class="arrow down"></span></button> <button type="button" aria-label="其他" class="mobile-dropdown-title"><span class="title">其他</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          NPM包使用记录
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/projects/npm/log4js.html" class="nav-link">
  Log4js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/markmap.html" class="nav-link">
  Markmap.js
</a></li><li class="dropdown-subitem"><a href="/projects/npm/react-pdf.html" class="nav-link">
  React-pdf
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/db/mysql/0" class="sidebar-heading clickable"><span>mysql</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/db/redis/0" class="sidebar-heading clickable"><span>redis</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/db/mongodb/0" class="sidebar-heading clickable open"><span>mongodb</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/db/mongodb/0.html" class="sidebar-link">Mongodb 简略</a></li><li><a href="/db/mongodb/1.html" aria-current="page" class="active sidebar-link">Mac 的安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#安装-homebrew" class="sidebar-link">安装 homebrew</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#切换-homebrew-源" class="sidebar-link">切换 Homebrew 源</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#安装-mongodb" class="sidebar-link">安装 mongodb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#mongodb-安装坑位" class="sidebar-link">mongodb 安装坑位</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#配置-mongodb" class="sidebar-link">配置 mongodb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#配置文件" class="sidebar-link">配置文件</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#开始你的配置" class="sidebar-link">开始你的配置</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#全局环境变量配置" class="sidebar-link">全局环境变量配置</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#启动与暂停-mongodb" class="sidebar-link">启动与暂停 mongodb</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#启动暂停方式-1" class="sidebar-link">启动暂停方式 1</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#启动暂停方式-2" class="sidebar-link">启动暂停方式 2</a></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#验证是否启动成功" class="sidebar-link">验证是否启动成功</a></li></ul></li><li class="sidebar-sub-header"><a href="/db/mongodb/1.html#mongodb-客户端工具" class="sidebar-link">mongodb 客户端工具</a></li></ul></li><li><a href="/db/mongodb/2.html" class="sidebar-link">使用 Mongodb</a></li><li><a href="/db/mongodb/3.html" class="sidebar-link">Nodejs 链接 mongodb</a></li><li><a href="/db/mongodb/4.html" class="sidebar-link">Mongoose - Node 应用</a></li><li><a href="/db/mongodb/5.html" class="sidebar-link">Mongo 开启事务的副本集大坑</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="mac-的安装"><a href="#mac-的安装" class="header-anchor">#</a> Mac 的安装</h1> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Mac 的安装要使用 <code>homebrew</code>，然后通过 <code>homwbrew</code> 来安装 <code>mongodb</code>，客户端安装的是 <code>compass</code></p></div> <h2 id="安装-homebrew"><a href="#安装-homebrew" class="header-anchor">#</a> 安装 <code>homebrew</code></h2> <p>打开 <code>homebrew</code> 的官网，就有安装的命令。目前 2022 年看到的是酱紫的，看到的命令行就是安装 <code>homebrew</code> 的语句，复制执行即可。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>/bin/bash -c <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">curl</span> -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh<span class="token variable">)</span></span>&quot;</span>
</code></pre></div><p><img src="/assets/img/homebrew.5faf57b0.png" alt="An image"></p> <p>安装结束之后通过 <code>brew --version</code> 就可以看到当前的版本号。</p> <h2 id="切换-homebrew-源"><a href="#切换-homebrew-源" class="header-anchor">#</a> 切换 Homebrew 源</h2> <p><strong>Homebrew</strong> 由以下几部分组成:</p> <table><thead><tr><th style="text-align:center;">名称</th> <th style="text-align:center;">简介</th></tr></thead> <tbody><tr><td style="text-align:center;"><code>brew</code></td> <td style="text-align:center;"><code>Homebrew</code>的源代码仓库</td></tr> <tr><td style="text-align:center;"><code>homebrew-core</code></td> <td style="text-align:center;"><code>Homebrew</code> 的核心软件仓库</td></tr> <tr><td style="text-align:center;"><code>homebrew-bottles</code></td> <td style="text-align:center;"><code>Homebrew</code> 预编译二进制软件包</td></tr> <tr><td style="text-align:center;"><code>homebrew-cask</code></td> <td style="text-align:center;">提供 <code>macOS</code> 应用和大型二进制文件</td></tr></tbody></table> <h4 id="切换成阿里源"><a href="#切换成阿里源" class="header-anchor">#</a> 切换成阿里源</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看 brew.git 当前源</span>
$ <span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>brew --repo<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> remote -v
origin    https://github.com/Homebrew/brew.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
origin    https://github.com/Homebrew/brew.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span>

<span class="token comment"># 查看 homebrew-core.git 当前源</span>
$ <span class="token builtin class-name">cd</span> <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>brew --repo homebrew/core<span class="token variable">)</span></span>&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token function">git</span> remote -v
origin    https://github.com/Homebrew/homebrew-core.git <span class="token punctuation">(</span>fetch<span class="token punctuation">)</span>
origin    https://github.com/Homebrew/homebrew-core.git <span class="token punctuation">(</span>push<span class="token punctuation">)</span>

<span class="token comment"># 修改 brew.git 为阿里源</span>
$ <span class="token function">git</span> -C <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>brew --repo<span class="token variable">)</span></span>&quot;</span> remote set-url origin https://mirrors.aliyun.com/homebrew/brew.git

<span class="token comment"># 修改 homebrew-core.git 为阿里源</span>
$ <span class="token function">git</span> -C <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span>brew --repo homebrew/core<span class="token variable">)</span></span>&quot;</span> remote set-url origin https://mirrors.aliyun.com/homebrew/homebrew-core.git

<span class="token comment"># zsh 替换 brew bintray 镜像</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles'</span> <span class="token operator">&gt;&gt;</span> ~/.zshrc
$ <span class="token builtin class-name">source</span> ~/.zshrc

<span class="token comment"># bash 替换 brew bintray 镜像</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">'export HOMEBREW_BOTTLE_DOMAIN=https://mirrors.aliyun.com/homebrew/homebrew-bottles'</span> <span class="token operator">&gt;&gt;</span> ~/.bash_profile
$ <span class="token builtin class-name">source</span> ~/.bash_profile

<span class="token comment"># 刷新源</span>
<span class="token comment"># 这一步的时间巨长，不要怀疑出错，等等就行。如果确实没反应，就自求多福吧</span>
$ brew update
</code></pre></div><h2 id="安装-mongodb"><a href="#安装-mongodb" class="header-anchor">#</a> 安装 mongodb</h2> <p>直接上 <code>github</code> 搜索 <code>mongodb/homebrew-brew</code> 进入<a href="https://github.com/mongodb/homebrew-brew" target="_blank" rel="noopener noreferrer">链接<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>参考文档，安装社区版即可。由于现在 MongoDB 不再开源了，从 2019 年 9 月 2 日开始，HomeBrew 也从核心仓库当中移除了 mongodb 模块。</p> <p>所以 <code>brew info mongodb</code> 也就找不到模块了</p> <p>但是，MongoDB 官方提供了一个单独的 HomeBrew 的社区版本安装，要先执行 <code>brew tap mongodb/brew</code></p> <p>成功后再执行 <code>brew install mongodb-community</code> 即可，我当前安装的是 6.0.1。</p> <p>虽然切换了源，但时间还是会很长 (๑◕︵◕๑)...</p></div> <h3 id="mongodb-安装坑位"><a href="#mongodb-安装坑位" class="header-anchor">#</a> mongodb 安装坑位</h3> <p>通过 <code>brew</code> 安装社区版的 <code>mongodb</code>, 最初是让升级 <code>xCode</code>，后来踩了一个坑报错是 <code>Permission denied</code> 的坑。</p> <p>下面是我找解决办法时碰到的安装<code>Octave</code>报相似错误的帖子，不过我们的报错信息相似（虽然我其实只记得第一行相似 😂😂）。大概的报错信息如下：</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 这也是我后来复制别人的，因为我的已经看不到了😃😃</span>
<span class="token comment"># 我只记得我的是 69.1</span>
cp: /usr/local/Cellar/icu4c/./69.1: Permission denied
cp: /var/folders/k4/xg60pppx3392pm_9tjyy35gc0000gn/T/d20200815-50984-1k6mia6/icu4c/./69.1: unable to copy extended attributes to /usr/local/Cellar/icu4c/./69.1: Permission denied
cp: /usr/local/Cellar/icu4c/./69.1/INSTALL_RECEIPT.json: No such <span class="token function">file</span> or directory
cp: /usr/local/Cellar/icu4c/./69.1/LICENSE: No such <span class="token function">file</span> or directory
</code></pre></div><p><strong>解决方案</strong>是：</p> <ol><li>我的报错的缘由是因为在 <code>/usr/local/Cellar/icu4c</code> 文件夹下并没有 <code>69.1</code> 这个文件夹，给它创建一个就可以了。但一定要执行</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">mkdir</span> /usr/local/Cellar/icu4c/69.1
</code></pre></div><p>我直接在文件夹下执行了 <code>sudo mkdir 69.1</code> 不明白为什么不行</p> <ol start="2"><li>赋权一：我先执行的是</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> <span class="token environment constant">$USER</span> /usr/local/Cellar/icu4c/69.1
</code></pre></div><p>再次 <code>brew</code> 安装后，仍然报错，最后几行长这样：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>cp: chflags: /usr/local/Cellar/openssl@1.1/./1.1.1m/share: No such <span class="token function">file</span> or directory
cp: /private/tmp/d20220208-25404-1gp1q4y/openssl@1.1/./1.1.1m/share: unable to copy ACL to /usr/local/Cellar/openssl@1.1/./1.1.1m/share: No such <span class="token function">file</span> or directory
cp: setattrlist: /usr/local/Cellar/openssl@1.1/./1.1.1m: No such <span class="token function">file</span> or directory
cp: chown: /usr/local/Cellar/openssl@1.1/./1.1.1m: No such <span class="token function">file</span> or directory
cp: chmod: /usr/local/Cellar/openssl@1.1/./1.1.1m: No such <span class="token function">file</span> or directory
cp: chflags: /usr/local/Cellar/openssl@1.1/./1.1.1m: No such <span class="token function">file</span> or directory
cp: /private/tmp/d20220208-25404-1gp1q4y/openssl@1.1/./1.1.1m: unable to copy ACL to /usr/local/Cellar/openssl@1.1/./1.1.1m: Permission denied
cp: setattrlist: /usr/local/Cellar/openssl@1.1/.: Permission denied
</code></pre></div><ol start="3"><li>赋权二：然后是执行的这个，就 OK 了。具体的命令信息，我目前的水平也不懂，有空研究下。</li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">chown</span> -R <span class="token variable">${<span class="token environment constant">USER</span>}</span>:staff /usr/local/Cellar/
</code></pre></div><h2 id="配置-mongodb"><a href="#配置-mongodb" class="header-anchor">#</a> 配置 mongodb</h2> <h4 id="补充于-2022-11-16-此时我已经拥有了公司新换的-m1-mac-上述安装坑全部没有碰到。-⁎⁍ᴗ⁍⁎"><a href="#补充于-2022-11-16-此时我已经拥有了公司新换的-m1-mac-上述安装坑全部没有碰到。-⁎⁍ᴗ⁍⁎" class="header-anchor">#</a> 补充于 2022-11-16,此时我已经拥有了公司新换的 M1 Mac，上述安装坑全部没有碰到。(⁎⁍̴̛ᴗ⁍̴̛⁎)</h4> <h3 id="配置文件"><a href="#配置文件" class="header-anchor">#</a> 配置文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># brew 安装的 mongodb 配置文件目录在 M1 芯片中是</span>
/opt/homebrew/etc/mongod.conf

<span class="token comment"># 同事的非 M1 的配置目录是</span>
/usr/local/etc/mongod.conf

<span class="token comment"># 非 brew 安装的可以查看是否一样</span>


<span class="token comment"># 通过命令打开配置文件</span>
<span class="token function">vim</span> /opt/homebrew/etc/mongod.conf
</code></pre></div><h3 id="开始你的配置"><a href="#开始你的配置" class="header-anchor">#</a> 开始你的配置</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#配置日志文件，MongoDB 采用的是yaml格式的配置文件</span>

systemLog:

<span class="token comment">#1、日志输出形式： 可选参数为 syslog 或 file    syslog 直接在终端输出    file 输出到文件</span>
  destination: <span class="token function">file</span>

<span class="token comment">#2、日志文件的路径： 当 destination 设置为 file 时必须</span>
  path: /opt/homebrew/var/log/mongodb/mongo.log

<span class="token comment">#3、是否以追加形式生成日志 ： true  追加   false   备份原来的日志文件，并生成新&gt;的日志文件</span>
  logAppend: <span class="token boolean">true</span>

<span class="token comment">#4、数据库路径</span>
storage:
  dbPath: /opt/homebrew/var/mongodb

<span class="token comment">#5、网络配置</span>
net:
<span class="token comment"># 绑定IP（默认127.0.0.1，只能本机访问，要允许所有ip，使用0.0.0.0）</span>
  bindIp: <span class="token number">127.0</span>.0.1, ::1
  ipv6: <span class="token boolean">true</span>

<span class="token comment"># 后面的在配置文件中默认就没有了</span>

<span class="token comment">#6、端口 （默认27017~27019，根据安装时的安装方式决定）</span>
  port: <span class="token number">27017</span>

<span class="token comment">#7、进程方式</span>
processManagement:
<span class="token comment"># 开启守护进程模式，如果 fork 为 false 的话，直接 ctrl + c 停止服务。</span>
<span class="token comment"># 如果为true，关闭麻烦点。参考启动暂停方式 2</span>
<span class="token comment"># 我选择的是false，对新手友好点，ctrl + c 即停</span>
  fork: <span class="token boolean">false</span>
</code></pre></div><h3 id="全局环境变量配置"><a href="#全局环境变量配置" class="header-anchor">#</a> 全局环境变量配置</h3> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>首先，我的电脑通过 <code>mongod -version</code> 后是可以直接获得当前版本号的。</p> <p>也就是可以直接使用 <strong>mongod</strong> 指令所以不需要配置环境变量。</p></div> <p>如果需要配置，找到 brew 安装 mongodb 的文件目录。我的在这里： <code>/opt/homebrew/Cellar/mongodb-community/6.0.1/bin</code></p> <p>接着就是会用 <a href="https://blog.csdn.net/weixin_45406712/article/details/121390648" target="_blank" rel="noopener noreferrer">shell<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>就可以了。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 我当前用的是 item2</span>
<span class="token function">open</span> ~/.zshrc

<span class="token comment"># 配置环境变量</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/opt/homebrew/Cellar/mongodb-community/6.0.1/bin

<span class="token comment"># 保存完 :wq 推出后</span>
<span class="token builtin class-name">source</span> ~/.zshrc


<span class="token comment"># 查看之前的配置是否已经成功</span>
<span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>

<span class="token comment"># 能看到刚才配置的路径</span>
</code></pre></div><p>除了 <strong>mongod</strong> 指令外，有时候我们还需要进入 mongo 的执行环境。</p> <p>大部分文档上看到的指令应该是 <strong>mongo</strong></p> <p>但是我当前安装的版本是 <strong>6.0.1</strong>，貌似没有这个指令。</p> <p>但是翻遍了文档发现有 <font color="red"><strong>mongosh</strong></font> 指令可以进入执行环境。帖子参考这个 <a href="https://blog.csdn.net/dongkeai/article/details/127330013" target="_blank" rel="noopener noreferrer">进入 mongo 环境<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="启动与暂停-mongodb"><a href="#启动与暂停-mongodb" class="header-anchor">#</a> 启动与暂停 mongodb</h2> <h3 id="启动暂停方式-1"><a href="#启动暂停方式-1" class="header-anchor">#</a> 启动暂停方式 1</h3> <ul><li>启动服务 <code>brew services start mongodb-community</code>, 启动服务后，可以输入 <code>mongo</code> 回车来确认</li> <li>暂停服务 <code>brew services stop mongodb-community</code></li></ul> <h3 id="启动暂停方式-2"><a href="#启动暂停方式-2" class="header-anchor">#</a> 启动暂停方式 2</h3> <p>我当前用的这个</p> <p><strong>启动</strong>： 使用 mongod 来启动服务， 通过 --config 或 -f 命令来使用配置文件</p> <div class="language-bash extra-class"><pre class="language-bash"><code>mongod --config opt/homebrew/etc/mongod.conf
<span class="token comment"># 或者</span>
mongod -f opt/homebrew/etc/mongod.conf
</code></pre></div><p><strong>注意：多次执行 <code>mongod -f</code> 指令并不能重启 mongodb。需要先通过下面的停止方案杀死当前的进程才行。</strong></p> <p><strong>停止</strong>(参考的别人)</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 如果之前的配置文件里 fork 为 false 的话，直接 ctrl + c 停止服务。</span>
<span class="token comment"># 如果 fork 为 true , 使用以下两种方法都可以。</span>
<span class="token comment"># 方法一：通过查杀进程的方式，查看进程，使用 kill 命令；不能使用kill -9，为什么不能使用kill -9 请百度 kill 与 kill -9 的区别</span>
<span class="token comment"># 通常启动服务成功，会输出服务的进程ID，也可以使用以下命令来查看ID</span>
<span class="token function">ps</span> aux <span class="token operator">|</span> <span class="token function">grep</span> -v <span class="token function">grep</span> <span class="token operator">|</span> <span class="token function">grep</span> mongod

<span class="token comment"># 上述命令查出来的信息的第二位就是 进程ID</span>
<span class="token function">kill</span> 进程ID 即可关闭当前的mongodb进程


<span class="token comment">#方法二：在客户端进去，使用shutdown命令</span>
<span class="token operator">&gt;</span> use admin<span class="token punctuation">;</span>
switched to db admin
<span class="token operator">&gt;</span> db.shutdownServer<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
server should be down<span class="token punctuation">..</span>.

<span class="token comment"># 在主节点（primary）上运行shutdown命令时，服务器在关闭之前，⬇️</span>
<span class="token comment"># 会先等待备份节点追赶主节点以保持同步。这将回滚的可能性降至最低，⬇️</span>
<span class="token comment"># 但shutdown操作有失败的可能性。如几秒钟内没有备份节点成功同步，⬇️</span>
<span class="token comment"># 则shutdown操作失败，主节点不会停止运行。</span>
</code></pre></div><h3 id="验证是否启动成功"><a href="#验证是否启动成功" class="header-anchor">#</a> 验证是否启动成功</h3> <p>浏览器访问 <code>localhost:27017</code> 可以成功打开一个页面，浏览器内容如下：</p> <p><strong>It looks like you are trying to access MongoDB over HTTP on the native driver port.</strong></p> <h2 id="mongodb-客户端工具"><a href="#mongodb-客户端工具" class="header-anchor">#</a> mongodb 客户端工具</h2> <p>在 <code>mongodb</code> 的官网上提供了 <code>Compass</code> 工具，就是图标是个叶子的软件，进入安装对应电脑的版本即可。
启动后的界面现在长这样，如果已经启动了 mongodb 服务，直接点击 connect 即可链接</p> <p><img src="/assets/img/compass.c34b805c.png" alt="An image"></p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/db/mongodb/0.html" class="prev">
        Mongodb 简略
      </a></span> <span class="next"><a href="/db/mongodb/2.html">
        使用 Mongodb
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.a86fb578.js" defer></script><script src="/assets/js/2.f4c76e8f.js" defer></script><script src="/assets/js/20.80bddd98.js" defer></script>
  </body>
</html>
