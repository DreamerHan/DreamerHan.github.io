(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{461:function(t,s,a){t.exports=a.p+"assets/img/0.3905abc7.png"},462:function(t,s){t.exports="data:image/png;base64,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"},463:function(t,s,a){t.exports=a.p+"assets/img/2.7715c4e1.png"},464:function(t,s,a){t.exports=a.p+"assets/img/3.0a724dfb.png"},465:function(t,s,a){t.exports=a.p+"assets/img/4.32c1e83d.png"},466:function(t,s,a){t.exports=a.p+"assets/img/5.d294298c.png"},467:function(t,s,a){t.exports=a.p+"assets/img/6.bb6813d4.png"},468:function(t,s,a){t.exports=a.p+"assets/img/7.433f59a0.png"},469:function(t,s,a){t.exports=a.p+"assets/img/8.99f59918.png"},470:function(t,s,a){t.exports=a.p+"assets/img/9.cb3b5366.png"},471:function(t,s,a){t.exports=a.p+"assets/img/10.33cc4213.png"},472:function(t,s,a){t.exports=a.p+"assets/img/11.10b0a95b.png"},573:function(t,s,a){"use strict";a.r(s);var n=a(54),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"项目模块引用引发的记录"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#项目模块引用引发的记录"}},[t._v("#")]),t._v(" 项目模块引用引发的记录")]),t._v(" "),n("p",[t._v("之所以是引发的记录而不是思考，是因为到现在为止，我也不知道该思考什么，所以就先记录过程。")]),t._v(" "),n("h2",{attrs:{id:"import-引入报错了"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#import-引入报错了"}},[t._v("#")]),t._v(" import 引入报错了？")]),t._v(" "),n("p",[t._v("之前在项目中使用将 markdown 语法转成思维导图的 npm 包 "),n("strong",[t._v("markmap.js")]),t._v(" 时，我只是执行了:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Transformer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"markmap-lib"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" transformer "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Transformer")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("就碰到一大堆的相似的报错，有那么一大堆：\n"),n("img",{attrs:{src:a(461),alt:"An Image"}})]),t._v(" "),n("p",[t._v("我摘取了其中的一个：")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("ERROR "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ./node_modules/markmap-lib/dist/index.mjs "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),t._v(":16-20\nCan"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t import the named export '")]),t._v("Hook' from non EcmaScript module "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("only default "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" is available"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n @ ./src/pages/chatAi/components/chatPage/components/mindup/index.tsx\n @ ./src/pages/chatAi/components/chatPage/components/index.ts\n @ ./src/pages/chatAi/components/previewPage/index.tsx\n @ ./src/pages/chatAi/components/layoutRight/index.tsx\n @ ./src/pages/chatAi/chatAi.tsx\n @ ./src/pages/chatAi/index.tsx\n")])])]),n("p",[t._v("这个报错的意思就是在组件 mindup 代码执行时，出现了正在尝试"),n("strong",[t._v("用 import 的方式从一个并非 ECMAScript 模块中导入了一个名字是 Hook 的模块")]),t._v("。")]),t._v(" "),n("p",[t._v("在 ECMAScript(ES)模块中，可以通过 import 引入的模块，只能通过两种方式导出模块内容：")]),t._v(" "),n("ul",[n("li",[t._v("默认导出(default export)，也就是常用的 "),n("code",[t._v("export default xxx")])]),t._v(" "),n("li",[t._v("命名导出(named export)，常用的有 "),n("code",[t._v("export const fn = () => {}")]),t._v(" 或者 "),n("code",[t._v("export const A = xxx")])])]),t._v(" "),n("p",[t._v("但是我项目里全都是使用的 "),n("code",[t._v("import xxx from xxxx")]),t._v(" 的方式导入的模块，为啥到了它 markmap 就不行了呢？")]),t._v(" "),n("p",[t._v("难道天将降大任于斯人也？")]),t._v(" "),n("p",[t._v("这种模块和模块之间的疑问，我现在觉得最好的方法，就是用看起来最蠢的方法："),n("strong",[t._v("一点一点的对比两个依赖包")]),t._v("。")]),t._v(" "),n("p",[t._v("于是我扒开了项目里引用过的还正常的依赖： "),n("strong",[t._v("lodash-es")])]),t._v(" "),n("h2",{attrs:{id:"哪个是引入模块的入口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#哪个是引入模块的入口"}},[t._v("#")]),t._v(" 哪个是引入模块的入口？")]),t._v(" "),n("p",[t._v("展示一个从 lodash-es 中引用 throttle 模块的方式:")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" throttle "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lodash-es"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("第一时间有两个结论：")]),t._v(" "),n("ol",[n("li",[t._v("lodash-es 导出 throttle 的方式是 "),n("strong",[t._v("命名导出(named export)")]),t._v(" 方式，至少得是个 "),n("code",[t._v("export const throttle = () => {}")])]),t._v(" "),n("li",[n("code",[t._v("from lodash-es")]),t._v(" 应该是 "),n("code",[t._v("from lodash-es/index.js")]),t._v(" 吧？")])]),t._v(" "),n("p",[t._v("但是打开 "),n("code",[t._v("lodash-es")]),t._v(" 的 node_modules 依赖包后，没有 index.js 只有 "),n("code",[t._v("indexOf.js")]),t._v("，lodash-es 文件夹下，全是各个模块。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(462),alt:"An Image"}})]),t._v(" "),n("p",[t._v("没错，我觉着你看到了我画红框的那个文件了："),n("strong",[t._v("package.json")]),t._v("。")]),t._v(" "),n("p",[t._v("打开它来看几个字段：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(463),alt:"An Image"}})]),t._v(" "),n("h3",{attrs:{id:"字段-main"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字段-main"}},[t._v("#")]),t._v(" 字段 main")]),t._v(" "),n("p",[t._v("它指向的是 "),n("strong",[t._v("CommonJs")]),t._v(" 引入方式导入程序的入口文件，也就是：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" throttle "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lodash-es"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"字段-module"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字段-module"}},[t._v("#")]),t._v(" 字段 module")]),t._v(" "),n("p",[t._v("它指向 "),n("strong",[t._v("ESModule")]),t._v(" 引入方式导入程序的入口文件，也就是：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" throttle "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lodash-es"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("h3",{attrs:{id:"字段-type"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字段-type"}},[t._v("#")]),t._v(" 字段 type")]),t._v(" "),n("p",[n("code",[t._v("type")]),t._v(" 字段新增与 node@12.0.0 版本，于 v13.12.0，v12.17.0 取消标记 --experimental-modules。")]),t._v(" "),n("p",[n("strong",[t._v("值："),n("code",[t._v("module")]),t._v(" | "),n("code",[t._v("commonjs")]),t._v("，没有默认值，不设置 "),n("code",[t._v("type")]),t._v(" 字段时 .js 文件被视为 CommonJS。")])]),t._v(" "),n("h4",{attrs:{id:"作用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#作用"}},[t._v("#")]),t._v(" 作用")]),t._v(" "),n("p",[t._v("type 字段决定了 Node.js 中用到的所有 .js 文件的模块格式，这些 .js 文件将包含 package.json 的文件夹作为父级文件。")]),t._v(" "),n("p",[t._v("当最近的父级文件夹中的 package.json 中包含了 "),n("code",[t._v("type: 'module'")]),t._v(" 的配置时，所有的 .js 文件都被视作 ES 模块进行加载。")]),t._v(" "),n("p",[t._v("在搜索 "),n("code",[t._v("package.json")]),t._v(" 文件时，如果最近的 "),n("code",[t._v("package.json")]),t._v(" 就定义在当前的文件夹中，或者该文件夹的父文件夹中，等等往大了类推，直到 node_modules 或者 根文件夹。")]),t._v(" "),n("p",[t._v("如果最近的 package.json 缺少 "),n("code",[t._v("type")]),t._v(" 字段，或者包含 "),n("code",[t._v("type: 'commonjs'")]),t._v("，则 .js 文件被视为 CommonJS。如果到达根卷目录都没有找到 "),n("code",[t._v("package.json")]),t._v("，则 .js 文件被视为 CommonJS。")]),t._v(" "),n("p",[t._v("如果最近的 package.json 包含 "),n("code",[t._v("type: 'module'")]),t._v("，则 .js 文件的 import 语句被视为 ES 模块。")]),t._v(" "),n("p",[t._v('无论 "type" 字段的值如何，.mjs 文件始终被视为 ES 模块，而 .cjs 文件始终被视为 CommonJS。')]),t._v(" "),n("h4",{attrs:{id:"type-module-时"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#type-module-时"}},[t._v("#")]),t._v(" type: 'module' 时")]),t._v(" "),n("p",[t._v("此时的 .js 文件被视为 EsModule 文件，CommonJs 的文件就需要声明称 "),n("code",[t._v(".cjs")]),t._v(" 的后缀，如下：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ..."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"module"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.cjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"module"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exports"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"import"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"require"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.cjs"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./unstyled"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以省略，但不建议")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"import"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"require"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.cjs"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./*"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./*"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h4",{attrs:{id:"type-commonjs-或-没有设置-type-时"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#type-commonjs-或-没有设置-type-时"}},[t._v("#")]),t._v(" type: 'commonjs' 或 没有设置 type 时")]),t._v(" "),n("p",[t._v("此时 .js 将被视为 CmmonJs，并且我们需要将 EsModule 文件通常需要显示的声明为 "),n("code",[t._v(".mjs")]),t._v(" 或 "),n("code",[t._v(".esm.js")]),t._v("。")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ..."),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"module"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.mjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exports"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"import"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.mjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"require"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.js"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./unstyled"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 可以省略，但不建议")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"import"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.mjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"require"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/unstyled.js"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./*"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./*"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ...\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("h3",{attrs:{id:"回到-lodash-es-入口问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#回到-lodash-es-入口问题"}},[t._v("#")]),t._v(" 回到 lodash-es 入口问题")]),t._v(" "),n("p",[t._v("通过 lodash-es 的 package.json 文件，我们就知道入口文件是什么了，虽然它的 module 和 main 字段是一个文件。无所谓，我们会见到不同的。")]),t._v(" "),n("p",[t._v("来看看 lodash-es.js 文件，至少我们的第一个结论没毛病，它的确是 "),n("strong",[t._v("命名导出(named export) 的方式")]),t._v("。\n"),n("img",{attrs:{src:a(464),alt:"An Image"}})]),t._v(" "),n("p",[t._v("顺便把 "),n("code",[t._v("throttle")]),t._v(" 源码放这里，留着以后看：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("throttle")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" leading "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    trailing "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" func "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"function"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TypeError")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("FUNC_ERROR_TEXT")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isObject")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    leading "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"leading"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("leading "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" leading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    trailing "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"trailing"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" options "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("options"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("trailing "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" trailing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("debounce")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("func"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" wait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    leading"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" leading"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    maxWait"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" wait"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    trailing"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" trailing"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" throttle"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[n("strong",[t._v("那么问题来了：markmap.js 的是怎么回事呢？")])]),t._v(" "),n("h3",{attrs:{id:"markmap-js-的入口们"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#markmap-js-的入口们"}},[t._v("#")]),t._v(" Markmap.js 的入口们")]),t._v(" "),n("h4",{attrs:{id:"markmap-lib-js-的入口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#markmap-lib-js-的入口"}},[t._v("#")]),t._v(" markmap-lib.js 的入口")]),t._v(" "),n("p",[t._v("同样的套路来看看 "),n("code",[t._v("markmap-lib.js")]),t._v(" 的 "),n("code",[t._v("package.json")]),t._v(" 文件内容：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(465),alt:"An Image"}})]),t._v(" "),n("p",[t._v("它告诉我们 import 引入的资源文件是："),n("code",[t._v("dist/index.mjs")]),t._v(" 文件，来看看哪个文件是怎么暴露模块的。")]),t._v(" "),n("p",[n("img",{attrs:{src:a(466),alt:"An Image"}})]),t._v(" "),n("p",[n("code",[t._v("export { Transform }")]),t._v(" 方式导出，完全没有问题。那么为啥给我报错了？再看一下报错信息：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token constant"}},[t._v("ERROR")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_modules"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("markmap"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("lib"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("dist"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("index"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("mjs "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("49")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\nCan"),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'t import the named export '")]),t._v("Hook' from non EcmaScript "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("module")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("only "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" is available"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),n("p",[n("strong",[t._v("Hook")]),t._v(" 模块是谁，全局搜索后，发现是 "),n("code",[t._v("markmap-lib.js")]),t._v(" 从 "),n("code",[t._v("markmap-common.js")]),t._v(" 中引入的模块：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(467),alt:"An Image"}})]),t._v(" "),n("h4",{attrs:{id:"markmap-common-js-的入口"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#markmap-common-js-的入口"}},[t._v("#")]),t._v(" markmap-common.js 的入口")]),t._v(" "),n("p",[n("img",{attrs:{src:a(468),alt:"An Image"}})]),t._v(" "),n("p",[t._v("从 "),n("code",[t._v("markmap-common.js")]),t._v(" 的 package.json 文件中我们看到 module 对应的是 "),n("code",[t._v("dist/index.mjs")]),t._v("。")]),t._v(" "),n("p",[t._v("而 "),n("code",[t._v("dist/index.mjs")]),t._v(" 文件中的内容也如约是 "),n("code",[t._v("export")]),t._v(" 导出形式：\n"),n("img",{attrs:{src:a(469),alt:"An Image"}})]),t._v(" "),n("p",[t._v("但是，此时 "),n("code",[t._v("markmap-lib.js")]),t._v(" 实际导入 Hook 模块时引用的文件却是清一色 "),n("code",[t._v("export.xxx")]),t._v(" 导出模式的 "),n("code",[t._v("dist/index.js")]),t._v(" 文件：\n"),n("img",{attrs:{src:a(470),alt:"An Image"}})]),t._v(" "),n("p",[t._v("这是为啥呢？")]),t._v(" "),n("p",[t._v("难道，天将降大任于斯人也？")]),t._v(" "),n("p",[t._v("啊，不对，难道天将降大 bug 于这个库？")]),t._v(" "),n("p",[t._v('那 "人家的程序员" 是怎么解决的？🙄🙄🙄')]),t._v(" "),n("p",[t._v("鲁树人说，啊呸～")]),t._v(" "),n("p",[t._v("周迅说，啊呸～")]),t._v(" "),n("p",[t._v("反正有人说："),n("strong",[t._v("方案就像海绵里的水，只要老板挤，就会有的。")])]),t._v(" "),n("h3",{attrs:{id:"来一场倒序的复盘"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#来一场倒序的复盘"}},[t._v("#")]),t._v(" 来一场倒序的复盘")]),t._v(" "),n("h4",{attrs:{id:"_1-markmap-lib-js-为啥要引用-markmap-common-js-的-index-js-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-markmap-lib-js-为啥要引用-markmap-common-js-的-index-js-文件"}},[t._v("#")]),t._v(" 1. markmap-lib.js 为啥要引用 markmap-common.js 的 index.js 文件？")]),t._v(" "),n("p",[t._v("首先，它引入的方式是 "),n("code",[t._v("import { Hook, ... } from 'markmap-common'")])]),t._v(" "),n("p",[t._v("默认情况下，我们都认为应该是 index.js 文件没错。")]),t._v(" "),n("p",[t._v("但是，markmap-common.js 也同时设置了 main 和 module 指向了不同的模块入口文件。")]),t._v(" "),n("p",[n("font",{attrs:{color:"red"}},[n("strong",[t._v("为什么 markmap-lib.js 引入的偏偏是 index.js 文件呢？")])])],1),t._v(" "),n("p",[t._v("根据【"),n("RouterLink",{attrs:{to:"/webpack/record/6.html#type-字段"}},[t._v("type")]),t._v("】 知识点")],1),t._v(" "),n("p",[t._v("是因为 markmap-common.js 最近的 package.json 中没有设置 type，那么默认它就是一个 CommonJs 模块，所以引用的是 "),n("code",[t._v("index.js")]),t._v("。")]),t._v(" "),n("p",[t._v("这理论应该是凑上了，坑了坑～")]),t._v(" "),n("h4",{attrs:{id:"_2-为什么从-markmap-lib-js-中导入-transformer-模块时会自动引入-index-mjs-文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-为什么从-markmap-lib-js-中导入-transformer-模块时会自动引入-index-mjs-文件"}},[t._v("#")]),t._v(" 2. 为什么从 markmap-lib.js 中导入 Transformer 模块时会自动引入 index.mjs 文件？")]),t._v(" "),n("p",[t._v("这估计要感谢它的 package.json 中设置的 exports 字段了。")]),t._v(" "),n("h3",{attrs:{id:"字段-exports"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#字段-exports"}},[t._v("#")]),t._v(" 字段 exports")]),t._v(" "),n("p",[t._v("exports 字段个人理解是用来定义模块的导出规则的。可以理解成"),n("strong",[t._v("它是路径的映射，也是模块引用的说明")]),t._v("。")]),t._v(" "),n("p",[t._v("来看看 markmap-lib.js 的 package.json 文件内容：")]),t._v(" "),n("div",{staticClass:"language-json extra-class"},[n("pre",{pre:!0,attrs:{class:"language-json"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"main"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"module"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist/index.mjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"unpkg"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist/browser/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"jsdelivr"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist/browser/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"exports"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"."')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"types"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./types/index.d.ts"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"browser"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/browser/index.mjs"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"require"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.js"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"default"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./dist/index.mjs"')]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token property"}},[t._v('"./package.json"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./package.json"')]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//...")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("其中的 exports 定义了几个信息：")]),t._v(" "),n("ol",[n("li",[n("strong",[t._v("require")]),t._v(" 引入的方式入口路径是 "),n("code",[t._v("./dist/index.js")]),t._v(" 文件")]),t._v(" "),n("li",[n("strong",[t._v("default")]),t._v(" 表示当你 "),n("code",[t._v("import xx from 'markmap-lib'")]),t._v(" 时，默认导入的文件就是 "),n("code",[t._v("index.mjs")]),t._v("，这就找到原因了。")])]),t._v(" "),n("h2",{attrs:{id:"该如何解决呢"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#该如何解决呢"}},[t._v("#")]),t._v(" 该如何解决呢？")]),t._v(" "),n("h3",{attrs:{id:"resolve-alias-方案"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resolve-alias-方案"}},[t._v("#")]),t._v(" Resolve.alias 方案")]),t._v(" "),n("p",[t._v("首先是 webpack 配置中的 resolve 配置。它是用来设置模块如何被解析的。")]),t._v(" "),n("p",[t._v("而 "),n("code",[t._v("resolve.alias")]),t._v(" 配置在项目开发时，大多是用来给 "),n("code",[t._v("import")]),t._v(" 或 "),n("code",[t._v("require")]),t._v(" 引入的包来配置别名的。最常见的就是关于 src 文件夹的配置：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n  resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    alias"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@src"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("除了配置别名外，"),n("code",[t._v("resolve.alias")]),t._v(" 还可以指定模块引入的具体文件和路径，其实原理就是针对相应的模块做了一个别名处理。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"path"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//....")]),t._v("\n  resolve"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    alias"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 注意：__dirname 之后的内容根据自己项目的结构目录进行调整")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@src"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("__dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./src"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"markmap-common"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        __dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./node_modules/markmap-common/dist/index.mjs"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      remarkable"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" path"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        __dirname"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./node_modules/remarkable/dist/esm/index.js"')]),t._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("上面调整完，报错就不见了。但是，可以看到，我除了配置了 "),n("code",[t._v("markmap-common")]),t._v(" 还配置了 "),n("code",[t._v("remarkable")]),t._v("，这两个都是在 "),n("code",[t._v("markmap-lib")]),t._v("中使用的，"),n("RouterLink",{attrs:{to:"/webpack/record/6.html#markmap-js-的入口们"}},[t._v("见 Markmap.js 的入口们第四个图")]),t._v("。")],1),t._v(" "),n("p",[t._v("很明显，这种配置方案很复杂，如果有多个呢？如果 "),n("code",[t._v("markmap-common")]),t._v(" 中还有更深此次的引入呢？")]),t._v(" "),n("p",[t._v("这种方案很明显不够通用。")]),t._v(" "),n("h3",{attrs:{id:"更改-type-值"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更改-type-值"}},[t._v("#")]),t._v(" 更改 type 值")]),t._v(" "),n("p",[t._v("其实这是我的第一个反应，但是很明显由于各种项目现状是不行的。")]),t._v(" "),n("p",[t._v("其次，也有别的模块由于这种更改反而出现了 require 引入导致了报错，反正很难受。")]),t._v(" "),n("h3",{attrs:{id:"使用-require-方法引入"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用-require-方法引入"}},[t._v("#")]),t._v(" 使用 require 方法引入")]),t._v(" "),n("p",[t._v("思路是这样的，假如我使用 require 方法引入 "),n("code",[t._v("markmap-lib")]),t._v("。")]),t._v(" "),n("p",[t._v("根据它的 "),n("code",[t._v("package.json")]),t._v(" 中的 "),n("code",[t._v("exports")]),t._v(" 配置，我需要导入的是 "),n("code",[t._v("markmap-lib/dist/index.js")]),t._v(" 文件。")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 要显示的声明自己导入的就是 markmap-list/dist/index 文件")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Transformer "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"markmap-lib/dist/index"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),n("p",[t._v("这个文件的内部通过 "),n("code",[t._v("require")]),t._v(" 方法引入的别的包。而项目本身已经设置了 "),n("code",[t._v("type: 'commonjs'")]),t._v("，这正好吻合。\n"),n("img",{attrs:{src:a(471),alt:"An Image"}})]),t._v(" "),n("p",[t._v("接下俩就是配置项目中除了 import 引用之外，还可以同时使用 require 引用了。")]),t._v(" "),n("p",[t._v("好在我只是在项目写了一下 require 就有了提醒，按照提醒配置就成功了。不知道是不是因为项目是 ts 的原因。\n"),n("img",{attrs:{src:a(472),alt:"An Image"}})]),t._v(" "),n("p",[t._v("这种方式感觉后面还有坑，但是目前没踩到，就算了。碰到了，再填吧～")]),t._v(" "),n("h2",{attrs:{id:"参考文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),n("ol",[n("li",[n("a",{attrs:{href:"https://juejin.cn/post/7212436135287504954",target:"_blank",rel:"noopener noreferrer"}},[t._v("一文彻底搞懂 package.json 中的 exports,main,module,type"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://juejin.cn/post/7032278473389539365",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于 package.json 中 type 属性的含义"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://webpack.docschina.org/concepts/module-resolution/#resolving-rules-in-webpack",target:"_blank",rel:"noopener noreferrer"}},[t._v("Webpack 官网-模块解析篇章"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://webpack.docschina.org/configuration/resolve/#resolvealias",target:"_blank",rel:"noopener noreferrer"}},[t._v("webpack 官网-Resolve 篇章"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("a",{attrs:{href:"https://nodejs.cn/dist/latest-v20.x/docs/api/packages.html#type",target:"_blank",rel:"noopener noreferrer"}},[t._v("module/package 包模块"),n("OutboundLink")],1)]),t._v(" "),n("li",[n("strong",[t._v("最后感谢"),n("a",{attrs:{href:"https://yiyan.baidu.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("文心一言"),n("OutboundLink")],1),t._v("不停给我普及各种不懂的东西。o(^▽^)o")])])])])}),[],!1,null,null,null);s.default=r.exports}}]);