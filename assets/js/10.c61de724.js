(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{415:function(t,s,a){t.exports=a.p+"assets/img/0.f1b29e9e.png"},416:function(t,s,a){t.exports=a.p+"assets/img/1.d7ca3c79.png"},417:function(t,s,a){t.exports=a.p+"assets/img/3.cdd661e4.png"},418:function(t,s,a){t.exports=a.p+"assets/img/2.9923cbe5.png"},542:function(t,s,a){"use strict";a.r(s);var e=a(54),v=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"selection"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#selection"}},[t._v("#")]),t._v(" Selection")]),t._v(" "),e("h2",{attrs:{id:"selection-对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#selection-对象"}},[t._v("#")]),t._v(" Selection 对象")]),t._v(" "),e("p",[t._v("首先，它是一个"),e("strong",[t._v("对象")]),t._v("。")]),t._v(" "),e("p",[t._v("获取对象的方法是：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSelection")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("它表示用户拖拽鼠标经过文字选择文本的范围或者插入符号的当前位置（比如鼠标在某个文字上点击），在它表示文本选区时，可能会横跨多个元素。")]),t._v(" "),e("p",[t._v("通常，插入光标的位置是可以通过 "),e("code",[t._v("Selection")]),t._v(" 获取的，此时的 "),e("code",[t._v("Selection")]),t._v(" 对象的 "),e("code",[t._v("Collpase")]),t._v(" 属性是 "),e("code",[t._v("true")]),t._v("，表示选区被压缩至一点了，即光标的位置。")]),t._v(" "),e("p",[t._v("如下图，我在 “的” 字后面进行鼠标点击，实时获取的 "),e("code",[t._v("Selection")]),t._v(" 对象信息，它能标记处我鼠标点击的位置和"),e("code",[t._v("Collpase")]),t._v("属性值。\n"),e("img",{attrs:{src:a(415),alt:"An Image"}})]),t._v(" "),e("p",[t._v("如果我们是划选一个文本段，获取的 "),e("code",[t._v("Selection")]),t._v(" 对象信息中部分字段就不一样了。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(416),alt:"An Image"}})]),t._v(" "),e("h2",{attrs:{id:"selection-对象属性"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#selection-对象属性"}},[t._v("#")]),t._v(" Selection 对象属性")]),t._v(" "),e("h3",{attrs:{id:"anchornode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#anchornode"}},[t._v("#")]),t._v(" anchorNode")]),t._v(" "),e("p",[t._v("只读属性。")]),t._v(" "),e("p",[t._v("表示该选区起点所在的节点（Node 节点），它包含的内容如下：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(417),alt:"An Image"}})]),t._v(" "),e("h3",{attrs:{id:"anchoroffset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#anchoroffset"}},[t._v("#")]),t._v(" anchorOffset")]),t._v(" "),e("p",[t._v("只读属性")]),t._v(" "),e("p",[t._v("它是一个数字，表示选区起点在 "),e("code",[t._v("anchorNode")]),t._v(" 中的位置偏移量。")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("如果 "),e("code",[t._v("anchorNode")]),t._v(" 是文本节点，那么返回的就是从该文字节点的第一个字开始，直到被选中的第一个字之间的字数。")]),t._v(" "),e("p",[t._v("举个 🌰：")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("上图中，“多地正向社会公布流感监测的最新情况。” 这句话，我从 “多” 字就选中了。也就是第一个字就被选中，那么偏移量为零。")])]),t._v(" "),e("li",[e("p",[t._v("如果上图我从 “正向..” 开始选中，那么偏移量就是 2。")])])]),t._v(" "),e("p",[e("strong",[t._v("这个开始的计数是从每个文字的前面开始计算的，第一个文字的前面的 "),e("code",[t._v("offset")]),t._v(" 就是 "),e("code",[t._v("0")]),t._v("。")])])]),t._v(" "),e("li",[e("p",[t._v("如果 "),e("code",[t._v("anchorNode")]),t._v(" 是一个元素，那么返回的就是在选区第一个节点之前的同级节点总数。(这些节点都是 "),e("code",[t._v("anchorNode")]),t._v(" 的子节点)。这个没有找到验证例子。")])])]),t._v(" "),e("h3",{attrs:{id:"focusnode"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#focusnode"}},[t._v("#")]),t._v(" focusNode")]),t._v(" "),e("p",[t._v("只读属性")]),t._v(" "),e("p",[t._v("与 anchorNode 同理，它表示的是选区终点所在的节点。")]),t._v(" "),e("h3",{attrs:{id:"focusoffset"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#focusoffset"}},[t._v("#")]),t._v(" focusOffset")]),t._v(" "),e("p",[t._v("只读属性")]),t._v(" "),e("p",[t._v("它是一个数字，表示选区起点在 "),e("code",[t._v("focusNode")]),t._v(" 中的位置偏移量。")]),t._v(" "),e("ol",[e("li",[t._v("如果 "),e("code",[t._v("focusNode")]),t._v(" 是文本节点，那么选区末尾被选中的第一个字，在该文字节点中是第几个字（从 0 开始计算），就返回它。")])]),t._v(" "),e("p",[t._v("那 "),e("code",[t._v("anchorNode")]),t._v("中的 🌰 来说：如果 “多地正向社会公布流感监测的最新情况。” 这句话，我从头划选到了倒数第三个字 “新”，那 "),e("code",[t._v("focusOffset")]),t._v(" 就是 15。")]),t._v(" "),e("p",[e("strong",[t._v("结束位置的计数是从选中文字与未选中文字中间的位置偏移量作为结果的，从第一个字前面以 0 开始的。")])]),t._v(" "),e("ol",{attrs:{start:"2"}},[e("li",[t._v("如果 focusNode 是一个元素，那么返回的就是在选区末尾之后第一个节点之前的同级节点总数。")])]),t._v(" "),e("h3",{attrs:{id:"iscollapsed"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#iscollapsed"}},[t._v("#")]),t._v(" isCollapsed")]),t._v(" "),e("p",[t._v("只读属性")]),t._v(" "),e("p",[t._v("返回一个布尔值，用于判断选区的起始点和终点是否在同一个位置。")]),t._v(" "),e("h3",{attrs:{id:"rangecount"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#rangecount"}},[t._v("#")]),t._v(" rangeCount")]),t._v(" "),e("p",[t._v("只读属性")]),t._v(" "),e("p",[t._v("返回该选区所包含的连续范围的数量。")]),t._v(" "),e("p",[t._v("注意它和获取 "),e("code",[t._v("Range")]),t._v(" 对象时有所关联：")]),t._v(" "),e("p",[t._v("假如 rangeCount 是 1， 它表示当前选区所包含的连续范围的数量是 1。关联到 "),e("code",[t._v("Range")]),t._v(" 范围时，就可以理解成一个数组内只有一个值，长度是 1。")]),t._v(" "),e("p",[t._v("所以从当前 "),e("code",[t._v("Selection")]),t._v(" 对象中获取 "),e("code",[t._v("Range")]),t._v(" 对象时， 就是 "),e("code",[t._v("Selection.getRangeAt(0)")]),t._v("。")]),t._v(" "),e("p",[t._v("如果此时 "),e("code",[t._v("getRangeAt(index)")]),t._v(" 中的 index 值大于或者等于 1，那就会抛出错误。")]),t._v(" "),e("h3",{attrs:{id:"anchor-与-focus"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#anchor-与-focus"}},[t._v("#")]),t._v(" anchor 与 focus")]),t._v(" "),e("p",[t._v("这两张图中有两个关键字："),e("strong",[t._v("anchor")]),t._v(" 和 "),e("strong",[t._v("focus")]),t._v("。")]),t._v(" "),e("ul",[e("li",[e("strong",[t._v("anchor")]),t._v(" 是指用户开始选择文本的位置，鼠标键按下的地方。")]),t._v(" "),e("li",[e("strong",[t._v("focus")]),t._v(" 是指用户选择文本结束的位置，鼠标键抬起的地方。")])]),t._v(" "),e("p",[e("strong",[t._v("anchor")]),t._v(" 和 "),e("strong",[t._v("focus")]),t._v(" 不能代表选区的起始位置和结束位置。因为每个人选择文本的方式不同，有喜欢 "),e("strong",[t._v("从左到右(从上倒下)")]),t._v(" 的，有喜欢倒着选择 "),e("strong",[t._v("从优到左(从下到上)")]),t._v(" 选择文本的。")]),t._v(" "),e("p",[t._v("所以，"),e("strong",[t._v("anchor")]),t._v(" 和 "),e("strong",[t._v("focus")]),t._v(" 谁在前，谁在后是不确定的。")]),t._v(" "),e("h3",{attrs:{id:"选区范围的内容"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#选区范围的内容"}},[t._v("#")]),t._v(" 选区范围的内容")]),t._v(" "),e("p",[t._v("如果想要获取划选范围内的的内容，可以通过 "),e("code",[t._v("toString()")]),t._v(" 方法获取。")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Selection"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("toString")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("该方法会返回被选中区域的纯文本，要求变量为字符串的函数会自动对对象进行该处理。")]),t._v(" "),e("h2",{attrs:{id:"range-对象"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#range-对象"}},[t._v("#")]),t._v(" Range 对象")]),t._v(" "),e("p",[e("code",[t._v("Selection")]),t._v(" 对象所对应的是用户选择的一个区域，即 "),e("code",[t._v("ranges")]),t._v("，又称"),e("strong",[t._v("拖蓝")]),t._v("。")]),t._v(" "),e("p",[t._v("默认情况下，这只是一个区域，但是在 firfox 浏览器上，通过 control 键可以产生多个拖蓝，这是需要注意的点。")]),t._v(" "),e("p",[t._v("Range 对象也能通过 DOM 创建、增加、删减。")]),t._v(" "),e("p",[t._v("获取 range 对象方式如下：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 获取 selection 对象")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" selectionObj "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getSelection")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 从 selection 对象中获取 range 对象")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("var")]),t._v(" range "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" selectionObj"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRangeAt")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),e("p",[t._v("来看一下，在上面两个 "),e("code",[t._v("Selection")]),t._v(" 对象下，产生的 "),e("code",[t._v("Range")]),t._v(" 对象有什么区别：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(418),alt:"An Image"}})])])}),[],!1,null,null,null);s.default=v.exports}}]);